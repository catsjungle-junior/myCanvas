<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>Examples</title>
<meta name="description" content="">
<meta name="keywords" content="">
<link href="" rel="stylesheet">
<style>
	body{text-align: center;background-color: #000;}
	#c1{background-color: #fff;}
</style>
<script>
	function Fish(img, w, h, nowFrame, maxFrame){
		this.img = img;

		this.w = w;
		this.h = h;

		this.x = 0;
		this.y = 0;

		this.nowFrame = nowFrame;
		this.maxFrame = maxFrame;

	}
	Fish.prototype.draw = function(gd){
		gd.drawImage(this.img, 0, 0, this.w, this.h, this.x, this.y, this.w, this.h);
		console.log('draw')
	};
	Fish.prototype.move = function(gd){
		this.x++;
		gd.clearRect(0, 0, c1.width, c1.height);
		gd.save();
		gd.drawImage(imgs.fish1, 0, 37*i, 55, 37, this.x, 0, 55, 37);
		gd.restore();
	};
	Fish.prototype.newFrame = function() {
		this.nowFrame ++ ;
		if(this.nowFrame == this.maxFrame ){
			this.nowFrame = 0;
		}
	}
	var j_imgs = [
		'fish1.png', //55*37
		'fish2.png', //78*64
		'fish3.png', //72*56
		'fish4.png', //77*49
		'fish5.png'  //107*122
	];

	function loadImages(arr, fn, fnError){
		var count = 0;
		var json = {};

		for(var i=0;i<arr.length;i++){
			var oImg = new Image();
			(function(index){
				oImg.onload = function(){
					var name = arr[index].split('.')[0];
					json[name] = this;
					count ++ ;
					if(count === arr.length){
						fn(json);
					}

					oImg.onerror = function(){
						fnError && fnError();
					};
				}
				
			})(i);
			oImg.src='images/'+arr[i];
		}
	}
	window.onload = function(){

		var c1 = document.getElementById('c1');
		var gd = c1.getContext('2d');

		loadImages(j_imgs,function(imgs){

			var f1 = new Fish(imgs.fish1, 55, 37, 0, 4);
			// gd.drawImage(imgs.fish1, 0, 0, 55, 37, 0, 0, 55, 37);

			// var i =0;
			console.log(f1)
			var x = 0;
			setInterval(function(){
				f1.draw(gd);
			},16);
			setInterval(function(){
				
				
			},150);
		}, function(){
			alert('加载失败，请刷新重试')
		});

		


			
		// var oF = new Fish(imgs.fish1, 37, 55);
		// oF.x = 100;
		// oF.y  = 100;
		// aFish.push(oF);

		

		// for(var i = 0;i<afis)

		// //移动，绘制
		// setInterval(function(){
			
		// },16);
		//换图
		
		
	};
	
	


	


	
</script>
</head>
<body>
   <canvas id="c1" width="800" height="600"></canvas>
</body>
</html>